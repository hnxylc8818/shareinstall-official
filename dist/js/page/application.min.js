var DfttModule=function(i){var t={name:"Index",typed:null,init:function(){var i=this;i.url="http://test-api.shareinstall.com/",i.addApp(),i.closeApp(),i.addEdit(),i.detailed(),i.getList(),i.addAppOk()},addApp:function(){$("#J_add").on("click",function(){$("#J_my-addApp").show()})},addAppOk:function(){var i=this;$(".preservation").on("click",function(){var t=$("#addApp").val();if(""==t)return void alert("应用名不能为空");var e=i.url+"appliance/create";$.ajax({url:e,type:"post",data:{username:$.cookie("userName"),token:$.cookie("_token"),app_name:t},success:function(t){if(console.log(t),0==t.code){var t=t.data;$("#addApp").val(""),$("#J_my-addApp").hide(),i.getList()}}})})},closeApp:function(){$(".close").on("click",function(){$("#J_my-addApp").hide()}),$(".cancel").on("click",function(){$("#J_my-addApp").hide()})},addEdit:function(){$("body").on("click",".edit",function(){var i=$(this).attr("data-key"),t=$(this).parent().siblings(".item-icon").children("img").attr("src"),e=$(this).parent().siblings(".item-name").html();$.cookie("oldImg",t,{expires:7}),$.cookie("oldName",e,{expires:7}),window.location.href="./editingApplication.html?key="+i})},detailed:function(){$(".detailed").on("click",function(){window.location.href="./overview.html"})},getList:function(){var i=this,t=i.url+"appliance/getlist";$.ajax({url:t,type:"post",data:{username:$.cookie("userName"),token:$.cookie("_token"),page:1,size:10},success:function(t){if(console.log(t),0==t.code){var t=t.data,e=t.list;$(".list-ul").html(""),i.renderingList(e)}}})},renderingList:function(i){if(0==i.length){var t='<li class="item"><div class="nomore">暂无数据</div></li>';$(".list-ul").append(t)}else{for(var t="",e=0;e<i.length;e++){var n=i[e];t+=' <li class="item"><span class="item-appkey">'+n.app_key+'</span><span class="item-name">'+n.name+'</span><span class="item-icon icon"><img src="'+n.icon+'" alt=""></span><span class="item-pingtai">暂无</span><span class="item-operation"><button class="edit" data-key="'+n.app_key+'">编辑</button><a href="./overview.html"><button class="detailed" data-key="'+n.app_key+'">详细</button></a></span></li>'}$(".list-ul").append(t)}}};return i[t.name]=t,i}(DfttModule||{});$(function(){$.each(DfttModule,function(i,t){$.isPlainObject(t)?$.isFunction(t.init)?t.init():console.error(t.init+" is not a Function!"):console.error(t+" is not a PlainObject!")})});