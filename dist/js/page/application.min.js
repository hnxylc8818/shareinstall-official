var DfttModule=function(e){var i={name:"Index",typed:null,init:function(){var e=this;e.url="http://api.shareinstall.com/",e.addApp(),e.closeApp(),e.addEdit(),e.detailed(),e.getList(),e.addAppOk()},addApp:function(){$("#J_add").on("click",function(){$("#J_my-addApp").show()})},addAppOk:function(){var e=this;$(".preservation").on("click",function(){var i=$("#addApp").val();if(""==i)return void alert("应用名不能为空");var a=e.url+"appliance/create";$.ajax({url:a,type:"post",data:{username:$.cookie("userName"),token:$.cookie("_token"),app_name:i},success:function(i){if(console.log(i),0==i.code){var i=i.data;$("#addApp").val(""),$("#J_my-addApp").hide(),e.getList()}}})})},closeApp:function(){$(".close").on("click",function(){$("#J_my-addApp").hide()}),$(".cancel").on("click",function(){$("#J_my-addApp").hide()})},addEdit:function(){$("body").on("click",".edit",function(){var e=$(this).attr("data-key"),i=$(this).parent().siblings(".item-icon").children("img").attr("src"),a=$(this).parent().siblings(".item-name").html();$.cookie("oldImg",i,{expires:7}),$.cookie("oldName",a,{expires:7}),window.location.href="./editingApplication.html?key="+e})},detailed:function(){$("body").on("click",".detailed",function(){var e=$(this).attr("data-key"),i=$(this).attr("data-img"),a=$(this).attr("data-name"),t=$(this).attr("data-scheme");$.cookie("appkey",e,{expires:7}),$.cookie("img",i,{expires:7}),$.cookie("appName",a,{expires:7}),$.cookie("scheme",t,{expires:7}),window.location.href="./overview.html"})},getList:function(){var e=this,i=e.url+"appliance/getlist";$.ajax({url:i,type:"post",data:{username:$.cookie("userName"),token:$.cookie("_token"),page:1,size:10},success:function(i){if(console.log(i),0==i.code){var i=i.data,a=i.list;$(".list-ul").html(""),e.renderingList(a)}else alert("登录已过期，请重新登录"),window.location.href="./login.html"}})},renderingList:function(e){if(0==e.length){var i='<li class="item"><div class="nomore">暂无数据</div></li>';$(".list-ul").append(i)}else{for(var i="",a=0;a<e.length;a++){var t=e[a];t.name.indexOf("script")>0&&(t.name="name"),i+=' <li class="item"><span class="item-appkey">'+t.app_key+'</span><span class="item-name">'+t.name+'</span><span class="item-icon icon"><img src="'+t.icon+'" alt=""></span><span class="item-pingtai">暂无</span><span class="item-operation"><button class="edit" data-key="'+t.app_key+'" data-img="'+t.icon+'">编辑</button><button class="detailed" data-name="'+t.name+'" data-key="'+t.app_key+'" data-img="'+t.icon+'" data-scheme="'+t.scheme+'">详细</button></span></li>'}$(".list-ul").append(i)}}};return e[i.name]=i,e}(DfttModule||{});$(function(){$.each(DfttModule,function(e,i){$.isPlainObject(i)?$.isFunction(i.init)||console.error(i.init+" is not a Function!"):console.error(i+" is not a PlainObject!")})});