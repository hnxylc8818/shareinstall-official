var DfttModule=function(t){var e={name:"Index",typed:null,init:function(){var t=this;t.getAmountStatistics(),t.amountStatistics(),t.initEchartsInstall(),t.initEchartsRegister(),t.growthTrendStatistics()},initTime:function(t){var e=this,a=a||"今日";t.html(a),t.daterangepicker({maxDate:moment(),dateLimit:{days:30},showDropdowns:!1,showWeekNumbers:!1,timePicker:!1,timePickerIncrement:60,timePicker12Hour:!1,ranges:{"所有":[moment("20160101","YYYYMMDD"),moment()],"今日":[moment().startOf("day"),moment()],"昨日":[moment().subtract("days",1).startOf("day"),moment().subtract("days",1).endOf("day")],"最近7日":[moment().subtract("days",6),moment()],"最近30日":[moment().subtract("days",29),moment()]},opens:"right",buttonClasses:["btn btn-default"],applyClass:"btn-small btn-primary blue",cancelClass:"btn-small",format:"YYYY/MM/DD",separator:" to ",locale:{applyLabel:"确定",cancelLabel:"取消",fromLabel:"起始时间",toLabel:"结束时间",customRangeLabel:"自定义",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],firstDay:1}},function(a,n,i){var i="自定义"==i?a.format("YYYY/MM/DD")+" - "+n.format("YYYY/MM/DD"):i;t.html(i);var o=[a.format("YYYY/MM/DD"),n.format("YYYY/MM/DD")];e.getAmountStatistics(o,t)})},initEchartsPie:function(t,e,a){var n=echarts.init(document.getElementById(t)),i={backgroundColor:"#fff",title:{x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},calculable:!0,series:[{name:e,type:"pie",radius:[20,50],color:["#00a3fe","#45dbda"],center:["50%","50%"],label:{normal:{show:!0},emphasis:{show:!0}},itemStyle:{normal:{borderWidth:2,borderColor:"#fff",label:{show:!1},labelLine:{show:!0,length:.001}}},data:a}]};n.setOption(i)},initEchartsCategory:function(t,e,a,n){var i=echarts.init(document.getElementById(t)),o={tooltip:{trigger:"axis"},legend:{data:[{name:"安装量",icon:"bar"},{name:"注册量",icon:"bar"},"安装量","注册量"]},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,data:e}],yAxis:[{type:"value"}],series:[{name:"安装量",type:"line",smooth:!0,itemStyle:{normal:{areaStyle:{color:"#62c1fb"},color:"#62c1fb",borderColor:"#62c1fb"}},lineStyle:{normal:{color:"#62c1fb"}},data:a},{name:"注册量",type:"line",smooth:!0,itemStyle:{normal:{areaStyle:{color:"#21e8ee"}}},lineStyle:{normal:{width:3,color:"#21e8ee"}},data:n}],color:["#4ad8dc","#2492e7"]};i.setOption(o)},initEchartsInstall:function(){var t=this;$(".register").html("15"),$(".install").html("15");var e=[{value:10,name:"ios"},{value:5,name:"Android"}];t.initEchartsPie("J_install","安装量",e)},initEchartsRegister:function(){var t=this;$(".register").html("15"),$(".install").html("15");var e=[{value:10,name:"ios"},{value:5,name:"Android"}];t.initEchartsPie("J_register","注册量",e)},growthTrend:function(){var t=this,e=["2015-01-18","2015-01-18","2015-01-18","2015-01-18","2015-01-18","2015-01-18","2015-01-18","2015-01-18","2015-01-18","2015-01-18"],a=[10,120,130,140,150,160,170,180,190,200],n=[210,220,230,240,250,260,270,280,290,3e3];t.initEchartsCategory("J_trend",e,a,n)},amountStatistics:function(){var t=this,e=$("#total");t.initTime(e)},getAmountStatistics:function(t,e){var a=this;if(void 0==t){t=[(new Date).getFullYear()+"/"+((new Date).getMonth()+1>9?(new Date).getMonth()+1:"0"+((new Date).getMonth()+1))+"/"+((new Date).getDate()>9?(new Date).getDate():"0"+(new Date).getDate()),(new Date).getFullYear()+"/"+((new Date).getMonth()+1>9?(new Date).getMonth()+1:"0"+((new Date).getMonth()+1))+"/"+((new Date).getDate()>9?(new Date).getDate():"0"+(new Date).getDate())]}if(console.log(t),void 0==e)a.initEchartsInstall(),a.initEchartsRegister(),a.growthTrend();else{var n=e.attr("id");"total"==n?(a.initEchartsInstall(),a.initEchartsRegister()):"trend"==n&&(console.log("增长趋势"),a.growthTrend())}},growthTrendStatistics:function(){var t=this,e=$("#trend");t.initTime(e)}};return t[e.name]=e,t}(DfttModule||{});$(function(){$.each(DfttModule,function(t,e){$.isPlainObject(e)?$.isFunction(e.init)?e.init():console.error(e.init+" is not a Function!"):console.error(e+" is not a PlainObject!")})});